<!doctype html>
<html lang="en">
<head>
    <script src="../assets/js/jquery-3.2.1.js" type="text/javascript"></script>
    <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
    <script src="https://www.amcharts.com/lib/3/serial.js"></script>
    <script type="text/javascript">
        /**
         * Define source data
         */
        var sourceData = [{
                "code": "Uganda",
                "value": 80,
            },
            {
                "code": "Nigeria",
                "value": 71,
            },
            {
                "code": "Tanzania",
                "value": 62,
            },
            {
                "code": "Rwanda",
                "value": 10,
            }];

        function lowercase(string) {
            return string.toLocaleLowerCase();
        }

        function contains(string, value) {
            return string.indexOf(value) !== -1;
        }

        /**
         * Function that checks which data is selected and generates a new data set
         */
        var name=';'
        $(document).ready(function () {
             name = lowercase(document.getElementById("filter-name").value);
             applyFilters();

        })
        function getFilteredData() {



            var filters = {};

            // get all filter checkboxes
            var fields = document.getElementsByClassName("filter-position");
            for (var i = 0; i < fields.length; i++) {
                if (fields[i].checked) {
                    filters[fields[i].value] = true;
                }
            }

            // init new data set
            var newData = [];

            // cycle through source data and filter out required data points
            for (var i = 0; i < sourceData.length; i++) {
                var dataPoint = sourceData[i];

                if (filters[dataPoint.code] &&
                    contains(lowercase(dataPoint.code), name)) {
                    newData.push({
                        "code": dataPoint.code,
                        "value": dataPoint.value,
                    });
                }
            }

            // return new data set
            return newData;

        }

        /**
         * Function which applies current filters when invoked
         */
        function applyFilters() {
            var data = getFilteredData();

            // update chart data
            chart1.dataProvider = data;
            chart1.validateData();
        }

        /**
         * Create chart
         */
        var chart1 = AmCharts.makeChart("chartdiv1", {
            "type": "serial",
            "dataProvider": getFilteredData(),
            "graphs": [{
                "fillAlphas": 0.9,
                "lineAlpha": 0.2,
                "lineColorField": "color",
                "fillColorsField": "color",
                "type": "column",
                "valueField": "value",
                "balloonText": "[[category]] ([[position]])<br><span style='font-size: 150%;'>$[[value]]</span>"
            }],
            "categoryField": "code",
            "valueAxes": [{
                "title": "Annual salary (US$)"
            }]
        });

    </script>
    <style>
        @import url(https://fonts.googleapis.com/css?family=Lato);

        html, body {
            width: 100%;
            height: 100%;
        }

        body {
            font-family: Lato;
            font-size: 14px;
            margin: 0px;
        }

        #chartdiv1, #chartdiv2 {
            width: 700px;
            height: 50%;
            border: 1px solid #ddd;
        }

        #charts {
            height: 100%;
            float: left;
        }

        #filter {
            margin-left: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            float: left;
        }
    </style>
</head>
<body>
<div id="filter">
    <label style="color: #67b7dc;"><input type="checkbox" value="Uganda" checked="checked" onclick="applyFilters()"
                                          class="filter-position"/> Uganda</label><br/>
    <label style="color: #fdd400;"><input type="checkbox" value="Rwanda" checked="checked" onclick="applyFilters()"
                                          class="filter-position"/> Rwanda</label><br/>
    <label style="color: #84b761;"><input type="checkbox" value="Nigeria" checked="checked" onclick="applyFilters()"
                                          class="filter-position"/> Nigeria</label><br/>
    <label style="color: #cc4748;"><input type="checkbox" value="Tanzania" checked="checked" onclick="applyFilters()"
                                          class="filter-position"/> Tanzania</label><br/>

    <label>
        Name:
        <input id="filter-name" type="text" onchange="applyFilters()"/>
    </label>
</div>
<div id="charts">
    <div id="chartdiv1"></div>
</div>
</body>
</html>